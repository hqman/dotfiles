unbind C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix

unbind r
bind r source-file ~/.config/tmux/tmux.conf \; display "Tmux  Reloaded!"

set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

set -g status-position top

bind c new-window -c "#{pane_current_path}"
bind - split-window -c "#{pane_current_path}"
bind _ split-window -h -c "#{pane_current_path}"

# set -g default-terminal "screen-256color" 
set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'

# open notifcation 
setw -g monitor-activity on
set -g visual-activity on

#------ status bar--------------
set -g status-style 'bg=default' # transparent
set -g status-left " #[fg=yellow,bold]#S"
set -ga status-left " #[fg=white,nobold]#(gitmux -cfg $HOME/.config/tmux/gitmux.conf)"
set -g status-left-length 200    # increase length (from 10)
set -g status-position top       # macOS / darwin style
set -g status-right ''           # blank
set -g status-style 'bg=#0050A4' # transparent

# default start fish shell
set -g default-command /usr/local/bin/fish

#-----------------------------
#bind g new-window -n 'ğŸŒ³' lazygit
# Display lazygit
bind -r g display-popup -d '#{pane_current_path}' -w80% -h80% -E lazygit
bind -n C-f resize-pane -Z
bind  a   run-shell "~/.local/scripts/run_last_command.sh"
# copy setting --------------------------------
# bufferç¼“å­˜å¤åˆ¶åˆ°Macç³»ç»Ÿç²˜è´´æ¿
bind-key C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
# Macç³»ç»Ÿç²˜è´´æ¿å†…å®¹å¤åˆ¶åˆ°ä¼šè¯
bind-key C-v run "reattach-to-user-namespace pbpaste | tmux load-buffer - \; paste-buffer -d"
# ç»‘å®šyé”®ä¸ºå¤åˆ¶é€‰ä¸­æ–‡æœ¬åˆ°Macç³»ç»Ÿç²˜è´´æ¿
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'reattach-to-user-namespace pbcopy'
# é¼ æ ‡æ‹–åŠ¨é€‰ä¸­æ–‡æœ¬ï¼Œå¹¶å¤åˆ¶åˆ°Macç³»ç»Ÿç²˜è´´æ¿
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"

bind Escape copy-mode
bind -T copy-mode-vi v send -X begin-selection  # tmux 2.4 and above
# copy (y)
# bind -t vi-copy y copy-selection   # tmux 2.3 and below
bind -T copy-mode-vi y send -X copy-selection   # tmux 2.4 and above

# mouse support
set -g mouse on # shift-mouse select can be used to copy text
# set mouse on with prefix m
bind m \
    set -g mouse on \;\
    display 'Mouse: ON'
# set mouse off with prefix M
bind M \
    set -g mouse off \;\
    display 'Mouse: OFF'

bind C-l send-keys 'C-l'
# resize panes
#â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•
bind -n M-h resize-pane -L 2
bind -n M-l resize-pane -R 2
bind -n M-j resize-pane -D 2
bind -n M-k resize-pane -U 2
#bind n c-p paste-buffer
bind-key x kill-pane # skip "kill-pane 1? (y/n)" prompt (cmd+w)

# Smart pane switching with awareness of Vim splits.

bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R
bind-key -T copy-mode-vi 'C-\' select-pane -l

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @resurrect-strategy-nvim 'session' 
set -g @continuum-restore 'on' 
set -g @resurrect-capture-pane-contents 'on'
set -g @yank_action 'copy-pipe'

run "$HOME/.config/tmux/plugins/tpm/tpm" # always at end of file
